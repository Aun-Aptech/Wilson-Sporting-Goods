<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Register / Login</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/Images/logo.png">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #f5f5f5;
      font-family: 'Montserrat', sans-serif;
    }
    .card {
      max-width: 420px;
      width: 100%;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 6px 16px rgba(0,0,0,0.2);
      border: none;
    }
    .nav-tabs { border-bottom: none; }
    .nav-tabs .nav-link {
      border-radius: 0;
      font-weight: 600;
      color: #2E7D32;
      border: none;
      padding: 12px;
    }
    .nav-tabs .nav-link.active {
      background-color: #2E7D32;
      color: #fff;
    }
    .card-body { padding: 1.5rem; }
    h4 { color: #2E7D32; font-weight: 700; }
    .form-control {
      border-radius: 10px;
      border: 1px solid #ccc;
      padding: 10px 12px;
    }
    .form-control:focus {
      border-color: #2E7D32;
      box-shadow: 0 0 6px rgba(46,125,50,0.5);
    }
    .btn-success {
      background-color: #2E7D32;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      padding: 10px;
    }
    .btn-success:hover { background-color: #256828; }
    .switch-link { text-align: center; margin-top: 12px; font-size: 14px; }
    .switch-link a {
      color: #2E7D32; font-weight: 600; text-decoration: none; cursor: pointer;
    }
    .switch-link a:hover { text-decoration: underline; }
.cart-alert {
  padding: 12px 18px;
  border-radius: 8px;
  margin-bottom: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  animation: fadeIn 0.3s ease;
  font-size: 14px;
  position: relative;
  color: #fff;
}

.cart-alert.success { background: #2E7D32; }   /* green */
.cart-alert.error   { background: #C62828; }   /* red */
.cart-alert.warning { background: #FF8F00; }   /* orange */

.cart-alert .close-btn {
  position: absolute;
  top: 5px;
  right: 8px;
  cursor: pointer;
  font-weight: bold;
}
#globalAlertBox {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1050;  /* above everything */
  display: flex;
  flex-direction: column;
  gap: 10px;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-10px); }
}

  </style>
</head>
<body>
<div id="globalAlertBox" class="alert-container"></div>


<div class="card">
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item w-50" role="presentation">
      <button
        class="nav-link active w-100"
        id="register-tab"
        data-bs-toggle="tab"
        data-bs-target="#register"
        type="button"
        role="tab"
        aria-controls="register"
        aria-selected="true"
      >Register</button>
    </li>

    <li class="nav-item w-50" role="presentation">
      <button
        class="nav-link w-100"
        id="login-tab"
        data-bs-toggle="tab"
        data-bs-target="#login"
        type="button"
        role="tab"
        aria-controls="login"
        aria-selected="false"
      >Login</button>
    </li>
  </ul>

  <div class="card-body tab-content">
    <div class="tab-pane fade show active" id="register" role="tabpanel" aria-labelledby="register-tab">
      <h4 class="text-center mb-3">Register</h4>
      <form id="register-form">
        <div class="mb-3">
          <label for="fullname">Full Name</label>
          <input type="text" id="username" class="form-control" placeholder="Enter full name"  required>
        </div>
        <div class="mb-3">
          <label for="reg-email">Email</label>
          <input type="email" id="email" class="form-control" placeholder="Enter email"  required>
        </div>
        <div class="mb-3">
          <label for="reg-password">Password</label>
          <input type="password" id="password" class="form-control" placeholder="Enter password"  required>
        </div>
        <button type="submit" class="btn btn-success w-100">Register</button>
        <a href="home.html" class="btn btn-success w-100" style="margin-top: 10px;">Back</a>

      </form>

      <div class="switch-link">
        Already have an account?
<a class="switch-to-tab"  href="#login" role="tab">
  Login
</a>

      </div>
    </div>

    <div class="tab-pane fade" id="login" role="tabpanel" aria-labelledby="login-tab">
      <h4 class="text-center mb-3">Login</h4>
      <form id="loginForm">
        <div class="mb-3">
          <label for="login-email">Email</label>
          <input type="email" id="login-email" class="form-control" placeholder="Enter email">
        </div>
        <div class="mb-3">
          <label for="login-password">Password</label>
          <input type="password" id="login-password" class="form-control" placeholder="Enter password">
        </div>
        <button type="submit" class="btn btn-success w-100">Login</button>
        <a href="home.html" class="btn btn-success w-100" style="margin-top: 10px;">Back</a>

      </form>

      <div class="switch-link">
        Don’t have an account?
        <a href="#register" class="switch-to-tab">Register</a>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.getElementById("register-form").addEventListener("submit", function(e){
  e.preventDefault();

  let username = document.getElementById("username").value.trim();
  let email = document.getElementById("email").value.trim();
  let password = document.getElementById("password").value.trim();

  let emailrule = /^[a-zA-Z._%+-]+@[a-zA-Z.-]+\.[a-zA-Z]{2,}$/;
  let passwordrule = /^[a-zA-Z0-9@-_]{6,20}$/;

  if(emailrule.test(email) && passwordrule.test(password)) {
    let user = { username: username, email: email, password: password };
    localStorage.setItem("user", JSON.stringify(user));

    showGlobalAlert("You registered successfully! Redirecting to login...", "success", () => {
      // Switch to login tab
      let loginTabBtn = document.querySelector('[data-bs-target="#login"]');
      let bsTab = bootstrap.Tab.getOrCreateInstance(loginTabBtn);
      bsTab.show();
    });
  } else {
    showGlobalAlert("Password must be 6–20 characters long and email must be valid.", "error");
  }
});


document.getElementById("loginForm").addEventListener("submit", function(e){
  e.preventDefault();

  let email = document.getElementById("login-email").value.trim();
  let password = document.getElementById("login-password").value.trim();

  let storedUser = JSON.parse(localStorage.getItem("user"));

  if(storedUser && email === storedUser.email && password === storedUser.password){   
    sessionStorage.setItem("loggedInUser", storedUser.username);
    showGlobalAlert(`Welcome, ${storedUser.username}! Redirecting to home...`, "success", () => {
      window.location.href = "home.html";
    });
  } else {
    showGlobalAlert("Invalid email or password!", "error");
  }
});


function showGlobalAlert(message, type = "success", callback = null) {
  const alertBox = document.getElementById("globalAlertBox");

  const alert = document.createElement("div");
  alert.className = `cart-alert ${type}`;
  alert.innerHTML = `
    <strong>${type === "success" ? "✓ Success!" : type === "error" ? "❌ Error!" : "⚠ Warning!"}</strong><br>
    ${message}
    <span class="close-btn" onclick="this.parentElement.remove()">&times;</span>
  `;

  alertBox.appendChild(alert);

  setTimeout(() => {
    if (alert && alert.parentElement) {
      alert.style.animation = "fadeOut 0.2s ease-in forwards";
      setTimeout(() => {
        if (alert.parentElement) {
          alert.remove();
          if (callback) callback();
        }
      }, 300);
    }
  }, 2000);
}
// Handle "Login" and "Register" switch links
document.querySelectorAll('.switch-to-tab').forEach(link => {
  link.addEventListener('click', function (e) {
    e.preventDefault();

    // Get target (#login or #register)
    let target = this.getAttribute('href');
    if (!target) return;

    // Find the actual tab button
    let triggerBtn = document.querySelector(`[data-bs-target="${target}"]`);
    if (triggerBtn) {
      let bsTab = bootstrap.Tab.getOrCreateInstance(triggerBtn);
      bsTab.show();
    }
  });
});


  </script>


  
</body>
</html>
